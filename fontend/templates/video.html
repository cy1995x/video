<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>电影页面</title>
    <link rel="stylesheet" href="../static/css/main.css"/>
    <link rel="stylesheet" href="../static/css/style.css"/>
    <link rel="stylesheet" href="../static/css/icofont.css"/>
    <link rel="stylesheet" href="../static/css/mian_style.css"/>
    <style>
        .news-bg-1 {
            background: url('../static/images/news1.jpg') no-repeat center / cover;
            height: 250px;
        }

        .news-date {
            left: 240px;
        }

        .news-content {
            left: 250px;
        }

        #my_diy {
            line-height: 0;
        }

        .tags-panel li, .tags-panel ul {
            margin: 0;
            padding: 0;
            list-style-type: none;
        }

        .tags-line {
            padding: 10px 0 !important;
        }

        .tags li {
            display: inline-block;
            text-align: -webkit-match-parent;
            padding: 10px;
            list-style-type:none;}

    </style>
</head>
<body>
<!--头部开始	-->
<header class="header">
    <div class="container">
        <div class="header_area">
            <div class="logo">
                <a href="/index">
                    <img src="../static/images/logo.png" alt="logo"/>
                </a>
            </div>
            <div class="meau">
                <ul>
                    <li>
                        <a href="/index">首页</a>
                    </li>
                    <li>
                        <a class="active" href="/video">电影</a>
                    </li>

                    <li>
                        <a href="/top100">top100</a>
                    </li>
                    <li style="width: 240px;">
                        <a href="/login" class="theme-btn">
                            <i class="icofont icofont-ticket"></i>
                            &nbsp;&nbsp;登陆
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <!--头部结束-->
</header>
<!--背景开始-->
<!-- breadcrumb area start -->
<div class="container">
<div class="blog-area">
                        <ul class="tags">
                            <li class="active" data-state-val="{ catTagName:'全部'}">
                                <a data-act="tag-click" target="_blank" data-val="{TagName:'全部'}" href="/movies/classification"
                                   style="cursor: default">全部</a>
                            </li>
                            <li>
                                <a data-act="tag-click" target="_blank" data-val="{TagName:'爱情'}" href="/movies/classification?type=4">爱情</a>
                            </li>
                            <li>
                                <a data-act="tag-click" target="_blank" data-val="{TagName:'喜剧'}" href="/movies/classification?type=2">喜剧</a>
                            </li>
                            <li>
                                <a data-act="tag-click" target="_blank" data-val="{TagName:'动画'}" href="/movies/classification?type=5">动画</a>
                            </li>
                            <li>
                                <a data-act="tag-click" target="_blank" data-val="{TagName:'剧情'}" href="/movies/classification?type=1">剧情</a>
                            </li>
                            <li>
                                <a data-act="tag-click" target="_blank" data-val="{TagName:'恐怖'}" href="/movies/classification?type=6">恐怖</a>
                            </li>
                            <li>
                                <a data-act="tag-click" target="_blank" data-val="{TagName:'惊悚'}" href="/movies/classification?type=7">惊悚</a>
                            </li>
                            <li>
                                <a data-act="tag-click" target="_blank" data-val="{TagName:'科幻'}" href="/movies/classification?type=13">科幻</a>
                            </li>
                            <li>
                                <a data-act="tag-click" target="_blank" data-val="{TagName:'动作'}" href="/movies/classification?type=9">动作</a>
                            </li>
                            <li>
                                <a data-act="tag-click" target="_blank" data-val="{TagName:'悬疑'}" href="/movies/classification?type=10">悬疑</a>
                            </li>
                            <li>
                                <a data-act="tag-click" target="_blank" data-val="{TagName:'犯罪'}" href="/movies/classification?type=3">犯罪</a>
                            </li>
                            <li>
                                <a data-act="tag-click" target="_blank" data-val="{TagName:'冒险'}" href="/movies/classification?type=11">冒险</a>
                            </li>
                            <li>
                                <a data-act="tag-click" target="_blank" data-val="{TagName:'战争'}" href="/movies/classification?type=12">战争</a>
                            </li>
                            <li>
                                <a data-act="tag-click" target="_blank" data-val="{TagName:'奇幻'}" href="/movies/classification?type=13">奇幻</a>
                            </li>
                            <li>
                                <a data-act="tag-click" target="_blank" data-val="{TagName:'运动'}" href="/movies/classification?type=14">运动</a>
                            </li>
                            <li>
                                <a data-act="tag-click" target="_blank" data-val="{TagName:'家庭'}" href="/movies/classification?type=15">家庭</a>
                            </li>
                            <li>
                                <a data-act="tag-click" target="_blank" data-val="{TagName:'古装'}" href="/movies/classification?type=16">古装</a>
                            </li>
                            <li>
                                <a data-act="tag-click" target="_blank" data-val="{TagName:'武侠'}" href="/movies/classification?type=17">武侠</a>
                            </li>
                            <li>
                                <a data-act="tag-click" target="_blank" data-val="{TagName:'西部'}" href="/movies/classification?type=18">西部</a>
                            </li>
                            <li>
                                <a data-act="tag-click" target="_blank" data-val="{TagName:'历史'}" href="/movies/classification?type=19">历史</a>
                            </li>
                            <li>
                                <a data-act="tag-click" target="_blank" data-val="{TagName:'传记'}" href="/movies/classification?type=20">传记</a>
                            </li>
                            <li>
                                <a data-act="tag-click" target="_blank" data-val="{TagName:'歌舞'}" href="/movies/classification?type=21">歌舞</a>
                            </li>
                            <li>
                                <a data-act="tag-click" target="_blank" data-val="{TagName:'黑色电影'}"
                                   href="/movies/classification?type=22">黑色电影</a>
                            </li>
                            <li>
                                <a data-act="tag-click" target="_blank" data-val="{TagName:'短片'}" href="/movies/classification?type=23">短片</a>
                            </li>
                            <li>
                                <a data-act="tag-click" target="_blank" data-val="{TagName:'纪录片'}"
                                   href="/movies/classification?type=24">纪录片</a>
                            </li>
                            <li>
                                <a data-act="tag-click" target="_blank" data-val="{TagName:'其他'}" href="/movies/classification?type=25">其他</a>
                            </li>
                        </ul>
                        </div>
</div>

<section id="content">
    <!--近期热播-->
    <div class="con_area">
        <div class="container">
            <div class="recent_con">
                <div class="con_top">
                    <h1>
                        <i class="icofont icofont-movie"></i>
                        近期热播
                    </h1>
                    <a id="more" href="#" class="more">
                        刷新>>
                    </a>
                </div>
                <div class="con_main">
                    <ul id="top_video" style="overflow:hidden;margin-bottom: 20px;">

                    </ul>
                    <ul id="bottom_video" style="overflow:hidden;margin-bottom: 20px;">

                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!-- video section start -->
    <!--top500-->
    <section class="blog-area">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="section-title pb-20">
                        <h1><i class="icofont icofont-star"></i> TOP100
                        </h1>
                        <a id="my_diy" href="/top100" class="more">
                            更多>>
                        </a>
                    </div>
                </div>
            </div>
            <hr/>
            <div class="row">
                <div id="top100" class="col-lg-12">
                    <!--top100动态渲染数据-->
                </div>
            </div>
        </div>
    </section>
    <section class="video ptb-90">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="section-title pb-20">
                        <h1><i class="icofont icofont-film"></i>电影花絮</h1>
                    </div>
                </div>
            </div>
            <hr/>
            <div class="row" style="overflow: hidden;">
                <div class="col-md-12">
                    <div class="video-slider mt-20">
                        <div class="video-area">
                            <img src="../static/images/video4.png" alt="video"/>
                            <a href="###" class="popup-youtube">
                                <i class="icofont icofont-ui-play"></i>
                            </a>
                        </div>
                        <div class="video-area">
                            <img src="../static/images/video2.png" alt="video"/>
                            <a href="#" class="popup-youtube">
                                <i class="icofont icofont-ui-play"></i>
                            </a>
                        </div>
                        <div class="video-area">
                            <img src="../static/images/video3.png" alt="video"/>
                            <a href="#" class="popup-youtube">
                                <i class="icofont icofont-ui-play"></i>
                            </a>
                        </div>
                        <div class="video-area" style="margin-right: 0px;">
                            <img src="../static/images/video5.png" alt="video"/>
                            <a href="#" class="popup-youtube">
                                <i class="icofont icofont-ui-play"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!--end start-->
    <footer id="end">
        <div class="container">
				<span class="company">
					京备号：xxxxxxxxx
				</span>
        </div>
    </footer>

</section>
</body>
<script type="text/javascript" src="../static/js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="../static/js/main.js"></script>
<script>
    token = window.localStorage.getItem('video_token');
    username = window.localStorage.getItem('video_user');
    // console.log(token, username)
    if (username) {
        $('.theme-btn').text(username + "个人中心")
        $('.theme-btn').attr('href', '/' + username + '/home/profile')
    }

    $.ajax({
        url: 'http://127.0.0.1:8000/v1/movies/' + '?count=5',
        type: 'get',
        dataType: 'json',
        success: function (data) {
                console.log(data)
                $.each(data, function (index, obj) {
                    $('#top100').append(`
                    <div class="single-news">
                        <div class="news-bg-1">
                            <img src='http://127.0.0.1:8000${obj.poster}' alt="" style="height: 100%">
                        </div>
                        <div class="news-date">
                            <h2><span>${obj.release_time.month}</span> ${obj.release_time.day}</h2>
                            <h1>${obj.release_time.year}</h1>
                        </div>
                        <div class="news-content">
                            <h2>${obj.title}</h2>
                            <p>主演：${obj.actor}</p>
                        </div>
                        <a href="/movie/${obj.rank}" target="_blank">Read More</a>
                    </div>
                `)
                })

        }
    })

    $.ajax({
        url:'http://127.0.0.1:8000/v1/movies/shortvideo',
        type: 'get',
        success: function (data){
            $.each(data.data.slice(0,4),function (index,obj){
                 $('#top_video').append(`<li class="img_right">
                            <img src="http://127.0.0.1:8000/media/${obj.poster}" alt="1"/>
                            <a href="/movie/shortplayer/${obj.id}">
                                <i class="icofont icofont-ui-play"></i>
                            </a>
                            <div class="review">
                                <div class="author-review">
                                    <b class="icofont icofont-star"></b>
                                    <b class="icofont icofont-star"></b>
                                    <b class="icofont icofont-star"></b>
                                    <b class="icofont icofont-star"></b>
                                    <b class="icofont icofont-star"></b>
                                </div>
                            </div>
                        </li>`)
            })
            $.each(data.data.slice(4,8),function (index,obj){
                 $('#bottom_video').append(`<li class="img_right">
                            <img src="http://127.0.0.1:8000/media/${obj.poster}" alt="1"/>
                            <a href="/movie/shortplayer/${obj.id}">
                                <i class="icofont icofont-ui-play"></i>
                            </a>
                            <div class="review">
                                <div class="author-review">
                                    <b class="icofont icofont-star"></b>
                                    <b class="icofont icofont-star"></b>
                                    <b class="icofont icofont-star"></b>
                                    <b class="icofont icofont-star"></b>
                                    <b class="icofont icofont-star"></b>
                                </div>
                            </div>
                        </li>`)
            })
        }
    })
    $('#more').click(function (){
        window.location.reload()
    })
</script>
</html>
